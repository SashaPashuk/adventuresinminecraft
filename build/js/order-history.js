import{ITEM_ADDED_TO_CART_ERROR,errorsLanguageLocalizationsEnum}from"./contants/errors.js";import API from"./services/api.js";import{getLocalizedError}from"./services/errorsLanguageLocalization.js";import{addToastNotification,renderOrderHistoryItemsHTML}from"./utils/helpers.js";document.addEventListener("DOMContentLoaded",async()=>{var r=await API.getShopOrdersRequest();renderOrderHistoryItemsHTML(r),addShopOrderItemsDropdownEventListener(),addRepeatOrderEventListener(r)});const addShopOrderItemsDropdownEventListener=()=>{document.querySelectorAll(".orderHistory-orders-order-container")?.forEach(t=>{t.querySelector("#arrow-order-button")?.addEventListener("click",()=>{var r=t?.querySelector(".orderHistory-orders-order-details"),e=t?.querySelector("hr"),o=t?.querySelector(".orderHistory-orders-order-actions-arrow");e.classList.toggle("hidden"),r.classList.toggle("hidden"),o.classList.toggle("orderHistory-orders-order-actions-arrow-open")})})},addRepeatOrderEventListener=t=>{document.querySelectorAll(".orderHistory-orders-order-container")?.forEach((r,e)=>{const o=t?.results[e].order_item;r.querySelector(".button-primary").addEventListener("click",()=>{o.forEach(async r=>{await API.addShopItemToCart({amount:r.amount,time_to_use:r.time_to_use,item_id:r.product_id})===ITEM_ADDED_TO_CART_ERROR&&addToastNotification({message:getLocalizedError(errorsLanguageLocalizationsEnum.ITEM_ALREADY_ADDED_TO_CART_WITH_NAME,{firstParam:r?.image_name||"Название товара"})})})})})};