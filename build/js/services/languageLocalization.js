import{languageLocalizations}from"../contants/languageLocalizations.js";import{LanguageEventObserever}from"../utils/observer.js";import{DEFAULT_LANGUAGE}from"../contants/constants.js";const defaultLocale=localStorage.getItem("language")||DEFAULT_LANGUAGE;let locale,translations={};function bindLocaleSwitcher(e){var a=document.querySelector("[data-i18n-switcher]");a&&(a.value=e,a.onchange=e=>{setLocale(e.target.value),localStorage.setItem("language",e.target.value),LanguageEventObserever.broadcast({language:e.target.value})})}async function setLocale(e){var a;e!==locale&&(a=await fetchTranslationsFor(e),locale=e,translations=a,setTimeout(translatePage,300))}document.addEventListener("DOMContentLoaded",()=>{setLocale(defaultLocale),bindLocaleSwitcher(defaultLocale)});const fetchTranslationsFor=e=>languageLocalizations[e],translatePage=()=>document.querySelectorAll("[data-i18n-key]").forEach(translateElement);function translateElement(e){var a=e.getAttribute("data-i18n-key"),a=translations[a];"INPUT"===e.nodeName&&e.dataset.i18nKey.includes("Placeholder")&&(e.placeholder=a),e.innerText=a}