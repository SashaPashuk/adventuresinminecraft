import API from"./services/api.js";import{USER_EXISTS_ERROR,VALID_EMAIL_ERROR,FIELD_NOT_EMPTY_ERROR,VALID_PASSWORDS_ERROR,PASSWORD_MIN_CHARACTERS_ERROR,PASSWORD_MAX_CHARACTERS_ERROR}from"./contants/errors.js";const signupButtonElement=document.querySelector("#signup-button"),signupFormElement=document.querySelector("#signup-form"),takeDataFromFormInputs=(signupButtonElement?.addEventListener("click",e=>{e.preventDefault(),cleanFormFromErrors(signupFormElement);e=takeDataFromFormInputs(signupFormElement);e.password!==e.samePassword?(signupFormElement?.querySelector('label[for="password"]')).innerHTML=VALID_PASSWORDS_ERROR:API.signup({email:e.email,password:e.password}).then(e=>{var r=e?.email&&e?.email[0]||"",R=e?.password&&e?.password[0]||"";[USER_EXISTS_ERROR,VALID_EMAIL_ERROR,PASSWORD_MAX_CHARACTERS_ERROR].includes(r)&&((signupFormElement?.querySelector('label[for="email"]')).innerHTML=e?.email[0]),[PASSWORD_MIN_CHARACTERS_ERROR,FIELD_NOT_EMPTY_ERROR,PASSWORD_MAX_CHARACTERS_ERROR].includes(R)&&((signupFormElement?.querySelector('label[for="password"]')).innerHTML=e?.password[0]),"User successfully registered!"===e&&(window.location.href="/pages/login.html")})}),e=>{e=e?.querySelectorAll("input");return Array.from(e).reduce((e,r)=>({...e,[r.getAttribute("name")]:r.value}),{})}),cleanFormFromErrors=e=>{(e?.querySelectorAll("label")).forEach(e=>e.innerHTML="")};